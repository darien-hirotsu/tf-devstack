---
- hosts: node
  remote_user: root
  become: yes
  tasks:
  - name: clean up dev-env repository path
    file:
      path: /opt/control/contrail-dev-env
      state: absent

  - name: install git package
    package:
      name: git
      state: present

  - name: clone dev-env repository
    git:
      repo: https://github.com/progmaticlab/contrail-dev-env.git
      dest: /root/contrail-dev-env
      version: 24d71e4a319c08deddd0bfbc6b6ba256f7b7672a

  - name: HACK format /etc/docker/daemon.json to make happy contrail-container-deployeer
    copy:
      src: /opt/control/daemon.json.tmpl
      dest: /root/contrail-dev-env/daemon.json.tmpl
